<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Laukums</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/laukumastils.css">
    </head>
    <body>
 <form>
  <label for="skaitlis">N vērtība:</label><br>
  <select id="skaitlis" name="skaitlis">
      <option value = "4">4x4 (Krāsu hex kodi)</option>
      <option value = "6">6x6 (Dzīvnieku zin. nos.)</option>
      </select><br><br>
</form>
        <button style = "width:50px;height:20px" onclick="myFunction()">Zīmēt</button>
        <button style = "width:50px;height:20px" onclick="cleaning()">Dzēst</button>
        <br><br>
    <script>
        let skaitli1 = ["url('images/01.png')", "url('images/02.png')", "url('images/03.png')", "url('images/04.png')", "url('images/05.png')", "url('images/06.png')", "url('images/07.png')", "url('images/08.png')", "url('images/09.png')"];
        let skaitli2 = ["#ff0000", "#ffa000", "#ffff00", "#00ff00", "#0000ff", "#a000ff", "#ffa0ff", "#a0a0a0", "#ffffff"];
        let saraksts = [];
        var sakums = 1;
        var t = 0;
        var uzvara = 0;
        var pirmaisid, otraisid, n, timecount;
        function sajukums(n){
            for (let i = 0; i < (n*n)/2; i++) {
                saraksts.push(skaitli1[i]);
                saraksts.push(skaitli2[i]);
            }
            for (let i = 0; i < saraksts.length; i++) {
                var rand = Math.floor(Math.random()*saraksts.length);
                var tmp = saraksts[rand];
                saraksts[rand] = saraksts[i];
                saraksts[i] = tmp;
            }
        }
        function timer() {
            t++;
        }
        function stoptimer() {
            clearInterval(timecount)
        }
        function myFunction() {
            n = document.getElementById("skaitlis").value;
            sajukums(n);
            var tabula = document.createElement("div");
            tabula.setAttribute("id", "tabula");
            for (let i = 0; i < n; i++) {
                var rinda = document.createElement("div");
                rinda.setAttribute("id", "rinda");
                for (let j = 0; j < n; j++) {
                   var button = document.createElement("button");
                   if (saraksts[(n*i+j)].length === 20) {
                       button.setAttribute("value", "bilde");
                   }
                   else {
                      button.setAttribute("value", "teksts"); 
                   }
                   button.setAttribute("id", ""+(n*i+(j+1)));
                   button.setAttribute("onclick", "maina(this)")
                   rinda.appendChild(button);
                }
                tabula.appendChild(rinda);
            }
            document.body.appendChild(tabula);
        var laiks = document.createElement("p");
        laiks.setAttribute("id", "laiks");
        document.body.appendChild(laiks);
        timecount = setInterval(timer,1000);
        }
        function cleaning() {
            document.body.removeChild(document.getElementById("tabula"));
            document.body.removeChild(document.getElementById("laiks"));
            saraksts = [];
            stoptimer();
            sakums = 1;
            t = 0;
            uzvara = 0;
        }
        function mainabilde(x) {
            document.getElementById(x).style.backgroundImage = saraksts[x-1];
        }
        function mainateksts(x) {
            document.getElementById(x).innerHTML = saraksts[x-1];
        }
        function maina(a) {
           if (sakums == 1) {
               pirmaisid = Number.parseInt(a.id);
               if (document.getElementById(pirmaisid).value === "bilde") {
                   mainabilde(pirmaisid);
               } else {
                  mainateksts(pirmaisid);
               }
               sakums = 0;
           }
           else if (sakums == 0) {
               otraisid = Number.parseInt(a.id);
               if (document.getElementById(otraisid).value === "bilde") {
                   mainabilde(otraisid);
               } else {
                  mainateksts(otraisid); 
               }
               if (document.getElementById(pirmaisid).value === document.getElementById(otraisid).value) {
                    if (document.getElementById(pirmaisid).value === "bilde") {
                    setTimeout(function(){document.getElementById(pirmaisid).style.backgroundImage = "";}, 1500);
                    setTimeout(function(){document.getElementById(otraisid).style.backgroundImage = "";}, 1500);  
                  } else {
                  setTimeout(function(){document.getElementById(pirmaisid).innerHTML = "";}, 1500);
                  setTimeout(function(){document.getElementById(otraisid).innerHTML = "";}, 1500);
               } 
               } else {
                   if (document.getElementById(pirmaisid).value === "bilde") {
                       if (skaitli1.indexOf(saraksts[pirmaisid-1]) === skaitli2.indexOf(saraksts[otraisid-1])) {
                           uzvara++;
                           document.getElementById(pirmaisid).style.pointerEvents = "none";
                           document.getElementById(otraisid).style.pointerEvents = "none";
                       }
                       else {
                          setTimeout(function(){document.getElementById(pirmaisid).style.backgroundImage = "";}, 1500);
                          setTimeout(function(){document.getElementById(otraisid).innerHTML = "";}, 1500);
                       }
                   } else {
                      if (skaitli2.indexOf(saraksts[pirmaisid-1]) === skaitli1.indexOf(saraksts[otraisid-1])) {
                           uzvara++;
                           document.getElementById(pirmaisid).style.pointerEvents = "none";
                           document.getElementById(otraisid).style.pointerEvents = "none";
                       }
                       else {
                          setTimeout(function(){document.getElementById(otraisid).style.backgroundImage = "";}, 1500);
                          setTimeout(function(){document.getElementById(pirmaisid).innerHTML = "";}, 1500);
                       } 
                   }
                   if (uzvara === n*n/2) {
                       stoptimer();
                       console.log(t);
                       laiks.innerHTML = "Uzvara! Laiks - " +Math.floor(t/60) +':' +(t%60);
                   }
               }
               sakums = 1;
            }
        }
        </script>
    </body>
</html>
